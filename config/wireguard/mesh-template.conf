# WireGuard Configuration Template for WSL Mesh Node
# Copy to /etc/wireguard/mesh.conf and update keys

[Interface]
# Generate with: wg genkey | tee privatekey | wg pubkey > publickey
PrivateKey = YOUR_PRIVATE_KEY_HERE
Address = 10.10.0.4/24
ListenPort = 51820
MTU = 1280  # Optimized for WSL2

# Optional: Enable IP forwarding for gateway functionality
# PostUp = sysctl -w net.ipv4.ip_forward=1
# PostUp = iptables -A FORWARD -i %i -j ACCEPT
# PostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
# PostDown = sysctl -w net.ipv4.ip_forward=0
# PostDown = iptables -D FORWARD -i %i -j ACCEPT
# PostDown = iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE

# DNS configuration for mesh network
# DNS = 10.10.0.1

[Peer]
# Hetzner Primary Node
PublicKey = HETZNER_PUBLIC_KEY_HERE
AllowedIPs = 10.10.0.1/32
Endpoint = HETZNER_PUBLIC_IP:51820
PersistentKeepalive = 25

[Peer]
# Fedora Top Mesh (Laptop)
PublicKey = LAPTOP_PUBLIC_KEY_HERE
AllowedIPs = 10.10.0.2/32
# No endpoint - laptop is behind NAT
PersistentKeepalive = 25

# Add additional peers as needed
# [Peer]
# PublicKey = PEER_PUBLIC_KEY
# AllowedIPs = 10.10.0.X/32
# Endpoint = PEER_IP:51820  # If peer has static IP
# PersistentKeepalive = 25